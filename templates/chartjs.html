<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Node.js Task List App</title>

    <!-- Bootstrap core CSS -->
    <link href="../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../style/cover.css" rel="stylesheet">




  </head>

  <body>

    <div class="site-wrapper">

      <div class="site-wrapper-inner">

        <div class="cover-container">

          <div class="masthead clearfix">
            <div class="inner">
              <h3 class="masthead-brand">Project Node Task App</h3>
              <nav>
                <ul class="nav masthead-nav">
                  <li><a href="/">Home</a></li>
                  <li><a href="/showSignInPage">SignIn</a></li>
                  <li><a href="/showSignUpPage">SignUp</a></li>
                  <li class="active"><a href="/chartjs">Chartjs</a></li>
                </ul>
              </nav>
            </div>
          </div>

          <div class="inner cover">
            <canvas id="myChart" width="614" height="307" class="chartjs-render-monitor" style="display: block; width: 614px; height: 307px;"></canvas>
          </div>

          <div class="mastfoot">
            <div class="inner">
              <p>Node Task App, by <a href="/">@jay3dec</a>.</p>
            </div>
          </div>

        </div>

      </div>

    </div>


  </body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="  https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.min.js"></script>
    <script src="/filejs"></script>

    <script>

    var graph_label = [],
        graph_data = [];
        var ctx;
        var myChart;

    $.ajax({
            url: '/usersacces',
            async: true

        })
        .done(function(data) {
            for (var i = 0, len = data[0].items.length; i < len; i++) {
                var e = data[0].items[i].nom;

                graph_label.push(e)



                var e1 = data[0].items[i].id;

                graph_data.push(e1)


            }


             ctx = document.getElementById("myChart").getContext('2d');
             myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: graph_label,
                    datasets: [{
                        label: '# of Votes',
                        data: graph_data,
                        backgroundColor: [
                            'rgb(255, 99, 132)',
                            'rgb(54, 162, 235)',
                            'rgb(255, 206, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(153, 102, 255)',
                            'rgb(255, 159, 64)'
                        ],
                        borderColor: [
                            'none',
                              'none',
                              'none',
                              'none',
                              'none',
                              'none'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            });

        }).always(function() {
            console.log(1);

        });
        socket.on('connect', function () {
        socket.on('message', function(message) {
          var databa = [];
          $.ajax({
                  url: '/usersacces'
              })
              .done(function(data) {
                  for (var i = 0, len = data[0].items.length; i < len; i++) {
                      var e1 = data[0].items[i].id;
                      databa.push(e1);
                  }
                  myChart.data.datasets[0].data = databa;
                          myChart.update();
              }).always(function() {
                  console.log(1);

              });

        console.log('The server has a message for you: ' + message);
    });
      });



    </script>
</html>
